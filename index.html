<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hottest Woman on the Internet â€” Elo Ranker</title>
  <meta name="description" content="Head-to-head Elo ranking of adult, consenting women creators (streamers, influencers, content creators)." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root { color-scheme: light dark; }
    .card { box-shadow: 0 10px 25px rgba(0,0,0,.08); }
    .btn { transition: transform .05s ease; }
    .btn:active { transform: translateY(1px) scale(.99); }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-white to-zinc-50 text-zinc-900 antialiased">
  <header class="max-w-6xl mx-auto px-4 py-6 flex items-center justify-between">
    <h1 class="text-2xl sm:text-3xl font-extrabold tracking-tight">Hottest Girl on the Internet</h1>
    <nav class="flex items-center gap-2 text-sm">
      <button id="unlockBtn" class="btn rounded-xl px-3 py-2 border border-zinc-300 hover:bg-zinc-100 flex items-center gap-1">
        <span id="lockIcon">ðŸ”’</span><span id="lockLabel">Unlock Admin</span>
      </button>
      <button id="addBtn" class="btn rounded-xl px-4 py-2 bg-zinc-900 text-white hover:bg-zinc-800 hidden">Add Creator</button>
      <button id="resetBtn" class="btn rounded-xl px-3 py-2 border border-zinc-300 hover:bg-zinc-100">Reset Demo</button>
    </nav>
  </header>

  <main class="max-w-6xl mx-auto px-4 pb-20">
    <!-- Arena -->
    <section aria-label="vote arena" class="mt-4">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <article id="cardA" class="card rounded-2xl overflow-hidden bg-white border border-zinc-200">
          <div class="aspect-[4/5] bg-zinc-100 overflow-hidden">
            <img id="imgA" alt="" class="w-full h-full object-cover" />
          </div>
          <div class="p-4 flex items-center justify-between gap-2">
            <div>
              <a id="nameA" href="#" class="text-lg font-semibold hover:underline"></a>
              <p id="tagA" class="text-xs text-zinc-500"></p>
            </div>
            <button id="voteA" class="btn rounded-xl px-5 py-2.5 bg-pink-600 text-white hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-400">Vote</button>
          </div>
        </article>

        <article id="cardB" class="card rounded-2xl overflow-hidden bg-white border border-zinc-200">
          <div class="aspect-[4/5] bg-zinc-100 overflow-hidden">
            <img id="imgB" alt="" class="w-full h-full object-cover" />
          </div>
          <div class="p-4 flex items-center justify-between gap-2">
            <div>
              <a id="nameB" href="#" class="text-lg font-semibold hover:underline"></a>
              <p id="tagB" class="text-xs text-zinc-500"></p>
            </div>
            <button id="voteB" class="btn rounded-xl px-5 py-2.5 bg-pink-600 text-white hover:bg-pink-700 focus:outline-none focus:ring-2 focus:ring-pink-400">Vote</button>
          </div>
        </article>
      </div>

      <div class="relative my-6">
        <div class="h-px bg-gradient-to-r from-transparent via-zinc-300 to-transparent"></div>
        <div class="absolute inset-0 flex items-center justify-center -mt-3">
          <span class="inline-flex items-center gap-2 bg-white px-4 py-1.5 rounded-full border border-zinc-200 text-xs font-medium">Head-to-Head Elo</span>
        </div>
      </div>
    </section>

    <!-- Leaderboard -->
    <section aria-label="leaderboard" class="mt-2">
      <div class="flex items-center justify-between mb-3">
        <h2 class="text-lg font-bold">Leaderboard</h2>
        <div class="text-xs text-zinc-500">Women creators â€¢ Click a name to view profile</div>
      </div>
      <div class="overflow-hidden rounded-2xl border border-zinc-200 bg-white">
        <table class="w-full text-sm">
          <thead class="bg-zinc-50 text-zinc-600">
            <tr>
              <th class="text-left p-3">#</th>
              <th class="text-left p-3">Creator</th>
              <th class="text-left p-3">Tags</th>
              <th class="text-right p-3">Elo</th>
              <th class="text-right p-3">W-L</th>
            </tr>
          </thead>
          <tbody id="board"></tbody>
        </table>
      </div>
    </section>

    <footer class="mt-10 text-xs text-zinc-500 leading-relaxed">
      <p><strong>Policy:</strong> This site lists <em>adult (18+), consenting women creators</em> (streamers, influencers, content creators). Submissions must confirm age and consent. Respectful conduct only.</p>
      <p>Demo stores data locally. For production, add a backend (auth, rate-limit, server-side Elo, takedown requests). I can set that up.</p>
    </footer>
  </main>

  <!-- Profile Modal -->
  <div id="profileModal" class="fixed inset-0 hidden items-end sm:items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/50"></div>
    <div class="relative bg-white w-full sm:max-w-lg rounded-t-2xl sm:rounded-2xl overflow-hidden">
      <div class="flex items-center justify-between p-4 border-b border-zinc-200">
        <h3 id="profileName" class="text-lg font-bold"></h3>
        <button id="closeModal" class="btn px-2 py-1 rounded-lg border border-zinc-300">Close</button>
      </div>
      <div class="grid grid-cols-2 gap-0">
        <div class="col-span-2 sm:col-span-1">
          <img id="profileImg" alt="" class="w-full h-full object-cover" />
        </div>
        <div class="col-span-2 sm:col-span-1 p-4 space-y-3">
          <p id="profileBio" class="text-sm text-zinc-700"></p>
          <div class="text-xs text-zinc-500"><span class="font-medium">Tags:</span> <span id="profileTags"></span></div>
          <div class="text-xs text-zinc-500"><span class="font-medium">Stats:</span> <span id="profileStats"></span></div>
          <div id="profileLinks" class="flex flex-wrap gap-2 pt-1"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Add Creator (Admin) -->
  <div id="addModal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/50"></div>
    <form id="addForm" class="relative bg-white w-full sm:max-w-lg rounded-2xl overflow-hidden">
      <div class="flex items-center justify-between p-4 border-b border-zinc-200">
        <h3 class="text-lg font-bold">Add Woman Creator (18+)</h3>
        <button type="button" id="closeAdd" class="btn px-2 py-1 rounded-lg border border-zinc-300">Close</button>
      </div>
      <div class="p-4 grid grid-cols-1 gap-3">
        <input required name="name" placeholder="Display name" class="w-full rounded-xl border border-zinc-300 px-3 py-2" />
        <input required name="image" placeholder="Portrait image URL (4:5 works best)" class="w-full rounded-xl border border-zinc-300 px-3 py-2" />
        <input name="tags" placeholder="Tags (comma-separated, e.g. streamer, influencer)" class="w-full rounded-xl border border-zinc-300 px-3 py-2" />
        <textarea name="bio" placeholder="Short bio (optional)" class="w-full rounded-xl border border-zinc-300 px-3 py-2"></textarea>
        <input name="x" placeholder="X (Twitter) profile URL (optional)" class="w-full rounded-xl border border-zinc-300 px-3 py-2" />
        <input name="onlyfans" placeholder="OnlyFans profile URL (optional)" class="w-full rounded-xl border border-zinc-300 px-3 py-2" />
        <label class="text-xs text-zinc-600 flex items-center gap-2">
          <input type="checkbox" name="adult" required class="accent-pink-600"> I confirm she is an adult (18+) and has consented to be listed.
        </label>
        <button class="btn rounded-xl px-5 py-2.5 bg-zinc-900 text-white hover:bg-zinc-800">Add</button>
      </div>
    </form>
  </div>

  <!-- Admin Unlock -->
  <div id="unlockModal" class="fixed inset-0 hidden items-center justify-center z-50">
    <div class="absolute inset-0 bg-black/50"></div>
    <form id="unlockForm" class="relative bg-white w-full sm:max-w-xs rounded-2xl overflow-hidden">
      <div class="p-4 border-b border-zinc-200">
        <h3 class="text-lg font-bold">Admin Password</h3>
      </div>
      <div class="p-4 grid gap-3">
        <input type="password" name="pass" placeholder="Enter password" class="w-full rounded-xl border border-zinc-300 px-3 py-2" autofocus />
        <div class="flex items-center justify-end gap-2">
          <button type="button" id="cancelUnlock" class="btn rounded-xl px-3 py-2 border border-zinc-300">Cancel</button>
          <button class="btn rounded-xl px-4 py-2 bg-zinc-900 text-white hover:bg-zinc-800">Unlock</button>
        </div>
        <p class="text-xs text-zinc-500">Demo only. Change the password constant in the code.</p>
      </div>
    </form>
  </div>

  <script>
    // ===== Admin password (demo only) =====
    // Change this to whatever you want for local testing.
    // In production, do NOT store secrets client-side.
    const ADMIN_PASS = "changeme";

    // ===== Storage keys =====
    const STORAGE_KEY = "hwoi_creators_v2";
    const VOTE_LOG_KEY = "hwoi_vote_log_v2";
    const ADMIN_FLAG = "hwoi_is_admin";

    // ===== Default women creators (placeholders) =====
    const DEFAULT_CREATORS = [
      {
        id: crypto.randomUUID(),
        name: "Ava Hart",
        image: "https://images.unsplash.com/photo-1544005313-94ddf0286df2?q=80&w=900&auto=format&fit=crop",
        tags: ["streamer","fitness"],
        bio: "Lifestyle & fitness creator.",
        x: "#",
        onlyfans: "#",
        elo: 1200, wins: 0, losses: 0
      },
      {
        id: crypto.randomUUID(),
        name: "Maya Chen",
        image: "https://images.unsplash.com/photo-1544005317-3f6f2b1d2b09?q=80&w=900&auto=format&fit=crop",
        tags: ["tech","gaming"],
        bio: "Gamer & tech reviewer.",
        x: "#",
        onlyfans: "",
        elo: 1200, wins: 0, losses: 0
      },
      {
        id: crypto.randomUUID(),
        name: "Luna Rossi",
        image: "https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=900&auto=format&fit=crop",
        tags: ["fashion","travel"],
        bio: "Fashion & travel vlogs.",
        x: "#",
        onlyfans: "#",
        elo: 1200, wins: 0, losses: 0
      },
      {
        id: crypto.randomUUID(),
        name: "Noor Al-Khaled",
        image: "https://images.unsplash.com/photo-1547425260-76bcadfb4f2c?q=80&w=900&auto=format&fit=crop",
        tags: ["beauty","skincare"],
        bio: "Skincare educator.",
        x: "#",
        onlyfans: "",
        elo: 1200, wins: 0, losses: 0
      }
    ];

    // ===== Helpers =====
    function loadCreators() {
      const raw = localStorage.getItem(STORAGE_KEY);
      return raw ? JSON.parse(raw) : DEFAULT_CREATORS;
    }
    function saveCreators(creators) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(creators));
    }
    function logVote(aId,bId,winnerId) {
      const log = JSON.parse(localStorage.getItem(VOTE_LOG_KEY) || "[]");
      log.push({ t: Date.now(), aId, bId, winnerId });
      localStorage.setItem(VOTE_LOG_KEY, JSON.stringify(log));
    }

    // Elo
    function expectedScore(rA, rB) { return 1 / (1 + Math.pow(10, (rB - rA) / 400)); }
    function kFactor(elo) { if (elo < 1200) return 40; if (elo < 1600) return 32; if (elo < 2000) return 24; return 16; }
    function applyElo(a, b, winner) {
      const EA = expectedScore(a.elo, b.elo), EB = expectedScore(b.elo, a.elo);
      const KA = kFactor(a.elo), KB = kFactor(b.elo);
      if (winner === "A") {
        a.elo = Math.round(a.elo + KA * (1 - EA)); a.wins++;
        b.elo = Math.round(b.elo + KB * (0 - EB)); b.losses++;
      } else {
        a.elo = Math.round(a.elo + KA * (0 - EA)); a.losses++;
        b.elo = Math.round(b.elo + KB * (1 - EB)); b.wins++;
      }
    }

    // ===== UI state =====
    let creators = loadCreators();
    let currentPair = [];

    const els = {
      imgA: document.getElementById("imgA"),
      imgB: document.getElementById("imgB"),
      nameA: document.getElementById("nameA"),
      nameB: document.getElementById("nameB"),
      tagA: document.getElementById("tagA"),
      tagB: document.getElementById("tagB"),
      voteA: document.getElementById("voteA"),
      voteB: document.getElementById("voteB"),
      board: document.getElementById("board"),
      resetBtn: document.getElementById("resetBtn"),
      addBtn: document.getElementById("addBtn"),
      unlockBtn: document.getElementById("unlockBtn"),
      lockIcon: document.getElementById("lockIcon"),
      lockLabel: document.getElementById("lockLabel"),
      // profile modal
      profileModal: document.getElementById("profileModal"),
      profileName: document.getElementById("profileName"),
      profileImg: document.getElementById("profileImg"),
      profileBio: document.getElementById("profileBio"),
      profileTags: document.getElementById("profileTags"),
      profileStats: document.getElementById("profileStats"),
      profileLinks: document.getElementById("profileLinks"),
      closeModal: document.getElementById("closeModal"),
      // add modal
      addModal: document.getElementById("addModal"),
      addForm: document.getElementById("addForm"),
      closeAdd: document.getElementById("closeAdd"),
      // unlock modal
      unlockModal: document.getElementById("unlockModal"),
      unlockForm: document.getElementById("unlockForm"),
      cancelUnlock: document.getElementById("cancelUnlock"),
    };

    // Pick two distinct creators
    function pickTwo() {
      if (creators.length < 2) return [];
      let i = Math.floor(Math.random() * creators.length);
      let j = i;
      while (j === i) j = Math.floor(Math.random() * creators.length);
      return [creators[i], creators[j]];
    }

    function renderArena() {
      currentPair = pickTwo();
      const [A,B] = currentPair;
      els.imgA.src = A.image; els.imgA.alt = A.name;
      els.imgB.src = B.image; els.imgB.alt = B.name;
      els.nameA.textContent = A.name; els.nameA.href = "#profile-"+A.id;
      els.nameB.textContent = B.name; els.nameB.href = "#profile-"+B.id;
      els.tagA.textContent = A.tags?.slice(0,2).join(" Â· ") || "";
      els.tagB.textContent = B.tags?.slice(0,2).join(" Â· ") || "";
    }

    function renderBoard() {
      const sorted = [...creators].sort((a,b)=>b.elo - a.elo);
      els.board.innerHTML = sorted.map((c,idx)=>`
        <tr class="${idx % 2 ? 'bg-white' : 'bg-zinc-50/60'}">
          <td class="p-3">${idx+1}</td>
          <td class="p-3"><a href="#profile-${c.id}" class="font-medium hover:underline">${c.name}</a></td>
          <td class="p-3 text-zinc-500">${(c.tags||[]).join(", ")}</td>
          <td class="p-3 text-right font-semibold">${c.elo}</td>
          <td class="p-3 text-right">${c.wins}-${c.losses}</td>
        </tr>
      `).join("");
    }

    function openProfile(id) {
      const c = creators.find(x=>x.id===id);
      if (!c) return;
      els.profileName.textContent = c.name;
      els.profileImg.src = c.image; els.profileImg.alt = c.name;
      els.profileBio.textContent = c.bio || "â€”";
      els.profileTags.textContent = (c.tags||[]).join(", ") || "â€”";
      els.profileStats.textContent = `Elo ${c.elo} â€¢ ${c.wins}-${c.losses}`;
      const links = [];
      if (c.x) links.push({label:"X", url:c.x});
      if (c.onlyfans) links.push({label:"OnlyFans", url:c.onlyfans});
      els.profileLinks.innerHTML = links.map(l=>`
        <a href="${l.url}" target="_blank" rel="noopener" class="px-2 py-1 rounded-lg border border-zinc-300 hover:bg-zinc-50 text-xs">${l.label}</a>
      `).join("");
      els.profileModal.classList.remove("hidden");
      els.profileModal.classList.add("flex");
    }

    // Voting
    els.voteA.addEventListener("click", ()=> {
      if (currentPair.length<2) return;
      const [A,B] = currentPair;
      applyElo(A,B,"A"); saveCreators(creators); logVote(A.id,B.id,A.id);
      renderBoard(); renderArena();
    });
    els.voteB.addEventListener("click", ()=> {
      if (currentPair.length<2) return;
      const [A,B] = currentPair;
      applyElo(A,B,"B"); saveCreators(creators); logVote(A.id,B.id,B.id);
      renderBoard(); renderArena();
    });

    // Profile deep links
    window.addEventListener("hashchange", ()=>{
      const m = location.hash.match(/^#profile-(.+)$/);
      if (m) openProfile(m[1]);
    });
    document.getElementById("nameA").addEventListener("click",(e)=>{ e.preventDefault(); openProfile(currentPair[0].id); });
    document.getElementById("nameB").addEventListener("click",(e)=>{ e.preventDefault(); openProfile(currentPair[1].id); });

    // Close modals
    els.closeModal.addEventListener("click", ()=> {
      els.profileModal.classList.add("hidden");
      els.profileModal.classList.remove("flex");
    });
    els.profileModal.addEventListener("click", (e)=> { if (e.target === els.profileModal) els.closeModal.click(); });

    // ===== Admin gating =====
    function updateAdminUI() {
      const isAdmin = sessionStorage.getItem(ADMIN_FLAG) === "1";
      els.addBtn.classList.toggle("hidden", !isAdmin);
      els.lockIcon.textContent = isAdmin ? "ðŸ”“" : "ðŸ”’";
      els.lockLabel.textContent = isAdmin ? "Admin Unlocked" : "Unlock Admin";
    }

    els.unlockBtn.addEventListener("click", ()=>{
      const isAdmin = sessionStorage.getItem(ADMIN_FLAG) === "1";
      if (isAdmin) {
        // lock again
        if (confirm("Lock admin?")) {
          sessionStorage.removeItem(ADMIN_FLAG);
          updateAdminUI();
        }
      } else {
        els.unlockModal.classList.remove("hidden");
        els.unlockModal.classList.add("flex");
        // focus input
        setTimeout(()=> {
          const inp = els.unlockForm.querySelector('input[name="pass"]');
          if (inp) inp.focus();
        }, 50);
      }
    });

    els.cancelUnlock.addEventListener("click", ()=>{
      els.unlockModal.classList.add("hidden");
      els.unlockModal.classList.remove("flex");
      els.unlockForm.reset();
    });

    els.unlockModal.addEventListener("click", (e)=> {
      if (e.target === els.unlockModal) els.cancelUnlock.click();
    });

    els.unlockForm.addEventListener("submit", (e)=>{
      e.preventDefault();
      const fd = new FormData(els.unlockForm);
      const pass = (fd.get("pass")||"").toString();
      if (pass === ADMIN_PASS) {
        sessionStorage.setItem(ADMIN_FLAG, "1");
        updateAdminUI();
        els.cancelUnlock.click();
      } else {
        alert("Incorrect password.");
      }
    });

    // Add creator (admin only)
    document.getElementById("addBtn").addEventListener("click", ()=>{
      if (sessionStorage.getItem(ADMIN_FLAG) !== "1") return alert("Admin locked.");
      els.addModal.classList.remove("hidden");
      els.addModal.classList.add("flex");
    });
    els.closeAdd.addEventListener("click", ()=>{
      els.addModal.classList.add("hidden");
      els.addModal.classList.remove("flex");
    });
    els.addModal.addEventListener("click", (e)=> { if (e.target === els.addModal) els.closeAdd.click(); });

    els.addForm.addEventListener("submit", (e)=>{
      e.preventDefault();
      if (sessionStorage.getItem(ADMIN_FLAG) !== "1") return alert("Admin locked.");
      const fd = new FormData(els.addForm);
      const isAdult = !!fd.get("adult");
      if (!isAdult) return alert("Adult & consent confirmation is required.");

      const creator = {
        id: crypto.randomUUID(),
        name: (fd.get("name")||"").toString().trim(),
        image: (fd.get("image")||"").toString().trim(),
        tags: (fd.get("tags")||"").toString().split(",").map(s=>s.trim()).filter(Boolean),
        bio: (fd.get("bio")||"").toString().trim(),
        x: (fd.get("x")||"").toString().trim(),
        onlyfans: (fd.get("onlyfans")||"").toString().trim(),
        elo: 1200, wins: 0, losses: 0
      };
      if (!creator.name || !creator.image) return alert("Name and image are required.");
      creators.push(creator);
      saveCreators(creators);
      renderBoard(); renderArena();
      els.closeAdd.click(); els.addForm.reset();
    });

    // Reset
    els.resetBtn.addEventListener("click", ()=>{
      if (!confirm("Reset demo data?")) return;
      localStorage.removeItem(STORAGE_KEY);
      localStorage.removeItem(VOTE_LOG_KEY);
      creators = loadCreators();
      renderBoard(); renderArena();
      scrollTo({top:0, behavior:"smooth"});
    });

    // Init
    updateAdminUI();
    renderBoard(); renderArena();
    const m = location.hash.match(/^#profile-(.+)$/);
    if (m) openProfile(m[1]);
  </script>
</body>
</html>
